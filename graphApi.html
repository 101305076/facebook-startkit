<!DOCTYPE html>
<html>
     <head>
          <meta charset="UTF-8">
          <title>Facebook api</title>						
          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
          <link rel="stylesheet" href="css/reset.css">	
          <link rel="stylesheet" href="css/main.css">
          <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
          <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
		  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.4.2.min.js"></script>
	</head>
	<body>
	    <header><p class="notLogin">未登入</p><button id="logoutBtn" class="isLogin btn btn-danger">登出</button></header>	
	    <article>
	    	<form id="loginView">
				  <label>username:<input class="form-control" id="username" type="text" placeholder="請輸入使用者名稱..."></label>
				  <label>password:<input class="form-control" id="password" type="password" placeholder="請輸入密碼..."></label>
				  <button id="loginBtn" class="btn btn-success" type="submit">登入</button>
				  <button id="signupBtn" class="btn btn-info" type="submit">註冊</button>
				  <button id="fbloginBtn" class="btn btn-primary" type="submit">臉書登入</button>
			</form>
	    </article>	
		
    <!--https://developers.facebook.com/docs/graph-api/using-graph-api/v2.3-->	
	<script>
        // Initialize Parse
        Parse.initialize("bAMceHECEizL9iWqat9IJqgLRBmta8WmhrivYOIL", "4Fyg7B8e4Foovs4XOVpnKZnvb9LJMNstYgp9tJe1");

        window.fbAsyncInit = function() {
        Parse.FacebookUtils.init({ // this line replaces FB.init({
           appId      : '1616729421906225', // Facebook App ID
           status     : true,  // check Facebook Login status
           cookie     : true,  // enable cookies to allow Parse to access the session
           xfbml      : true,  // initialize Facebook social plugins on the page
           version    : 'v2.3' // point to the latest Facebook Graph API version
        });
          
          // Run code after the Facebook SDK is loaded.
        };

        (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
		
		function login(){
	  	  Parse.User.logIn($('#username').val(),$('#password').val(),{
	  		  success:function(data){
	  		  	  alert("登入成功");
		          indexView();
	  		  },
	  		  error:function(data,error){
	  			  alert("登入失敗");
	  		  }
	  	  });
		}
		function signup(){
	  	  var user = new Parse.User();
	  	  user.set("username",$('#username').val());
	  	  user.set("password",$('#password').val());
	  	  user.signUp(null,{
	  		  success: function(user){
	  			  alert("註冊成功");
				  indexView();
	  		  },
	  		  error: function(data,error){
	  			  alert("註冊失敗");
	  		  }
	  	  }); 
		}
		function logout(){
	  	   Parse.User.logOut();
		   loginView();	
		}
		function fblogin(){
			
		}
		
	</script>
    <script src="js/graphApi.js"></script>		   	
    </body>
</html>